<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Flipper Zero Firmware: File Formats for Flipper&#39;s SubGhz Subsystem</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Flipper Zero Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> Formats for Flipper's <a class="el" href="struct_sub_ghz.html">SubGhz</a> Subsystem </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md119"></a>
.sub File Format</h1>
<p >Flipper uses <code>.sub</code> files to store <a class="el" href="struct_sub_ghz.html">SubGhz</a> transmissions. These are text files in Flipper <a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> Format. <code>.sub</code> files can contain either a <a class="el" href="struct_sub_ghz.html">SubGhz</a> Key with a certain protocol or <a class="el" href="struct_sub_ghz.html">SubGhz</a> RAW data.</p>
<p >A <code>.sub</code> files consist of 3 parts:</p>
<ul>
<li><b>header</b>: contains file type, version, and frequency</li>
<li><b>preset information</b>: preset type and, in case of a custom preset, transceiver configuration data</li>
<li><b>protocol and its data</b>: contains protocol name and its specific data, such as key, bit length, etc., or RAW data</li>
</ul>
<p >Flipper's <a class="el" href="struct_sub_ghz.html">SubGhz</a> subsystem uses presets to configure the radio transceiver. Presets are used to configure modulation, bandwidth, filters, etc. There are several presets available in stock firmware, and there is a way to create custom presets. See <a href="#adding-a-custom-preset">SubGhz Presets</a> for more details.</p>
<h1><a class="anchor" id="autotoc_md120"></a>
Header format</h1>
<p >Header is a mandatory part of <code>.sub</code> file. It contains file type, version, and frequency.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Filetype</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Filetype of subghz file format, must be <code>Flipper <a class="el" href="struct_sub_ghz.html">SubGhz</a> Key <a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="struct_version.html">Version</a></code>   </td><td class="markdownTableBodyNone">uint   </td><td class="markdownTableBodyNone"><a class="el" href="struct_version.html">Version</a> of subghz file format, current version is 1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Frequency</code>   </td><td class="markdownTableBodyNone">uint   </td><td class="markdownTableBodyNone">Frequency in Hertz   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md121"></a>
Preset information</h1>
<p >Preset information is a mandatory part for <code>.sub</code> files. It contains preset type and, in case of custom preset, transceiver configuration data.</p>
<p >When using one of the standard presets, only <code>Preset</code> field is required. When using a custom preset, <code>Custom_preset_module</code> and <code>Custom_preset_data</code> fields are required.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Preset</code>   </td><td class="markdownTableBodyNone">Radio preset name (configures modulation, bandwidth, filters, etc.). When using a custom preset, must be <code>FuriHalSubGhzPresetCustom</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Custom_preset_module</code>   </td><td class="markdownTableBodyNone">Transceiver identifier, <code>CC1101</code> for Flipper Zero    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Custom_preset_data</code>   </td><td class="markdownTableBodyNone">Transceiver configuration data   </td></tr>
</table>
<p >Built-in presets:</p>
<ul>
<li><code>FuriHalSubGhzPresetOok270Async</code> — On/Off Keying, 270kHz bandwidth, async(IO throw GP0)</li>
<li><code>FuriHalSubGhzPresetOok650Async</code> — On/Off Keying, 650kHz bandwidth, async(IO throw GP0)</li>
<li><code>FuriHalSubGhzPreset2FSKDev238Async</code> — 2 Frequency Shift Keying, deviation 2kHz, 270kHz bandwidth, async(IO throw GP0)</li>
<li><code>FuriHalSubGhzPreset2FSKDev476Async</code> — 2 Frequency Shift Keying, deviation 47kHz, 270kHz bandwidth, async(IO throw GP0)</li>
</ul>
<h2><a class="anchor" id="autotoc_md122"></a>
Transceiver Configuration Data</h2>
<p >Transceiver configuration data is a string of bytes, encoded in hex format, separated by spaces. For CC1101 data structure is: <code>XX YY XX YY .. 00 00 ZZ ZZ ZZ ZZ ZZ ZZ ZZ ZZ</code>, where:</p>
<ul>
<li>XX holds register address,</li>
<li>YY contains register value,</li>
<li>00 00: marks register block end,</li>
<li><code>ZZ ZZ ZZ ZZ ZZ ZZ ZZ ZZ</code>: 8 byte PA table (<a class="el" href="struct_power.html">Power</a> amplifier ramp table).</li>
</ul>
<p >You can find more details in the <a href="https://www.ti.com/lit/ds/symlink/cc1101.pdf">CC1101 datasheet</a> and <code>furi_hal_subghz</code> code.</p>
<h1><a class="anchor" id="autotoc_md123"></a>
File Data</h1>
<p ><code>.sub</code> file data section contains either key data — protocol name and its specific data, bit length, etc., or RAW data — an array of signal timings, recorded without any protocol-specific processing.</p>
<h2><a class="anchor" id="autotoc_md124"></a>
Key Files</h2>
<p ><code>.sub</code> files with key data files contain protocol name and its specific data, such as key value, bit length, etc. Check out the protocol registry for the full list of supported protocol names.</p>
<p >Example of a key data block in Princeton format:</p>
<div class="fragment"><div class="line">...</div>
<div class="line">Protocol: Princeton</div>
<div class="line">Bit: 24</div>
<div class="line">Key: 00 00 00 00 00 95 D5 D4</div>
<div class="line">TE: 400</div>
</div><!-- fragment --><p >Protocol-specific fields in this example:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Bit</code>   </td><td class="markdownTableBodyNone">Princeton payload length, in bits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Key</code>   </td><td class="markdownTableBodyNone">Princeton payload data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>TE</code>   </td><td class="markdownTableBodyNone">Princeton quantization interval   </td></tr>
</table>
<p >This file may contain additional fields, more details on available fields can be found in subghz protocols library.</p>
<h2><a class="anchor" id="autotoc_md125"></a>
RAW Files</h2>
<p >RAW <code>.sub</code> files contain raw signal data that is not processed through protocol-specific decoding. These files are useful for testing or sending data not supported by any known protocol.</p>
<p >For RAW files, 2 fields are required:</p>
<ul>
<li><code>Protocol</code>, must be <code>RAW</code></li>
<li><code>RAW_Data</code>, contains an array of timings, specified in microseconds Values must be non-zero, start with a positive number, and interleaved (change sign with each value). Up to 512 values per line. Can be specified multiple times to store multiple lines of data.</li>
</ul>
<p >Example of RAW data: </p><pre class="fragment">Protocol: RAW
RAW_Data: 29262 361 -68 2635 -66 24113 -66 11 ...
</pre><p> Long payload not fitting into internal memory buffer and consisting of short duration timings (&lt; 10us) may not be read fast enough from the SD card. That might cause the signal transmission to stop before reaching the end of the payload. Ensure that your SD Card has good performance before transmitting long or complex RAW payloads.</p>
<h1><a class="anchor" id="autotoc_md126"></a>
File examples</h1>
<h2><a class="anchor" id="autotoc_md127"></a>
Key file, standard preset</h2>
<pre class="fragment">Filetype: Flipper SubGhz Key File
Version: 1
Frequency: 433920000
Preset: FuriHalSubGhzPresetOok650Async
Protocol: Princeton
Bit: 24
Key: 00 00 00 00 00 95 D5 D4
TE: 400
</pre> <h2><a class="anchor" id="autotoc_md128"></a>
Key file, custom preset</h2>
<pre class="fragment">Filetype: Flipper SubGhz Key File
Version: 1
Frequency: 433920000
Preset: FuriHalSubGhzPresetCustom
Custom_preset_module: CC1101
Custom_preset_data: 02 0D 03 07 08 32 0B 06 14 00 13 00 12 30 11 32 10 17 18 18 19 18 1D 91 1C 00 1B 07 20 FB 22 11 21 B6 00 00 00 C0 00 00 00 00 00 00
Protocol: Princeton
Bit: 24
Key: 00 00 00 00 00 95 D5 D4
TE: 400
</pre> <h2><a class="anchor" id="autotoc_md129"></a>
RAW file, standard preset</h2>
<pre class="fragment">Filetype: Flipper SubGhz RAW File
Version: 1
Frequency: 433920000
Preset: FuriHalSubGhzPresetOok650Async
Protocol: RAW
RAW_Data: 29262 361 -68 2635 -66 24113 -66 11 ...
RAW_Data: -424 205 -412 159 -412 381 -240 181 ...
RAW_Data: -1448 361 -17056 131 -134 233 -1462 131 -166 953 -100 ...
</pre> <h2><a class="anchor" id="autotoc_md130"></a>
RAW file, custom preset</h2>
<pre class="fragment">Filetype: Flipper SubGhz RAW File
Version: 1
Frequency: 433920000
Preset: FuriHalSubGhzPresetCustom
Custom_preset_module: CC1101
Сustom_preset_data: 02 0D 03 07 08 32 0B 06 14 00 13 00 12 30 11 32 10 17 18 18 19 18 1D 91 1C 00 1B 07 20 FB 22 11 21 B6 00 00 00 C0 00 00 00 00 00 00
Protocol: RAW
RAW_Data: 29262 361 -68 2635 -66 24113 -66 11 ...
RAW_Data: -424 205 -412 159 -412 381 -240 181 ...
RAW_Data: -1448 361 -17056 131 -134 233 -1462 131 -166 953 -100 ...
</pre> <h1><a class="anchor" id="autotoc_md131"></a>
SubGhz configuration files</h1>
<p ><a class="el" href="struct_sub_ghz.html">SubGhz</a> application provides support for adding extra radio presets and additional keys for decoding transmissions in certain protocols.</p>
<h2><a class="anchor" id="autotoc_md132"></a>
SubGhz keeloq_mfcodes_user file</h2>
<p >This file contains additional manufacturer keys for Keeloq protocol. It is used to decode Keeloq transmissions. This file is loaded at subghz application start and is located at path <code>/ext/subghz/assets/keeloq_mfcodes_user</code>.</p>
<h3><a class="anchor" id="autotoc_md133"></a>
File format</h3>
<p ><a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> contains a header and a list of manufacturer keys.</p>
<p ><a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> header format:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Filetype</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone"><a class="el" href="struct_sub_ghz.html">SubGhz</a> Keystore file format, always <code>Flipper <a class="el" href="struct_sub_ghz.html">SubGhz</a> Keystore <a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="struct_version.html">Version</a></code>   </td><td class="markdownTableBodyNone">uint   </td><td class="markdownTableBodyNone"><a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> format version, 0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Encryption</code>   </td><td class="markdownTableBodyNone">uint   </td><td class="markdownTableBodyNone"><a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> encryption: for user-provided file, set to 0 (disabled)   </td></tr>
</table>
<p >Following the header, file contains a list of user-provided manufacture keys, one key per line. For each key, a name and encryption method must be specified, according to comment in file header. More information can be found in keeloq decoder source code.</p>
<h3><a class="anchor" id="autotoc_md134"></a>
Example</h3>
<pre class="fragment"># to use manual settings and prevent them from being deleted on upgrade, rename *_user.example files to *_user
# for adding manufacture keys
# AABBCCDDEEFFAABB:X:NAME
# AABBCCDDEEFFAABB - man 64 bit
# X - encryption method:
# - 0 - iterates over both previous and man in direct and reverse byte sequence
# - 1 - Simple Learning
# - 2 - Normal_Learning
# - 3 - Secure_Learning
# - 4 - Magic_xor_type1 Learning
#
# NAME - name (string without spaces) max 64 characters long
Filetype: Flipper SubGhz Keystore File
Version: 0
Encryption: 0
AABBCCDDEEFFAABB:1:Test1
AABBCCDDEEFFAABB:1:Test2
</pre> <h2><a class="anchor" id="autotoc_md135"></a>
SubGhz setting_user file</h2>
<p >This file contains additional radio presets and frequencies for <a class="el" href="struct_sub_ghz.html">SubGhz</a> application. It is used to add new presets and frequencies for existing presets. This file is being loaded on subghz application start and is located at path <code>/ext/subghz/assets/setting_user</code>.</p>
<h3><a class="anchor" id="autotoc_md136"></a>
File format</h3>
<p ><a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a> contains a header, basic options, and optional lists of presets and frequencies.</p>
<p >Header must contain the following fields:</p>
<ul>
<li><code>Filetype</code>: <a class="el" href="struct_sub_ghz.html">SubGhz</a> setting file format, must be <code>Flipper <a class="el" href="struct_sub_ghz.html">SubGhz</a> Setting <a class="el" href="struct_file.html" title="Structure that hold file index and returned api errors.">File</a></code>.</li>
<li><code><a class="el" href="struct_version.html">Version</a></code>: file format version, current is <code>1</code>.</li>
</ul>
<h4><a class="anchor" id="autotoc_md137"></a>
Basic settings</h4>
<ul>
<li><code>Add_standard_frequencies</code>: bool, flag indicating whether to load standard frequencies shipped with firmware. If set to <code>false</code>, only frequencies specified in this file will be used.</li>
<li><code>Default_frequency</code>: uint, default frequency used in <a class="el" href="struct_sub_ghz.html">SubGhz</a> application.</li>
</ul>
<h4><a class="anchor" id="autotoc_md138"></a>
Adding more frequencies</h4>
<ul>
<li><code>Frequency</code>: uint — additional frequency for the subghz application frequency list. Used in Read and Read RAW. You can specify multiple frequencies, one per line.</li>
</ul>
<h4><a class="anchor" id="autotoc_md139"></a>
Adding more hopper frequencies</h4>
<ul>
<li><code>Hopper_frequency</code>: uint — additional frequency for subghz application frequency hopping. Used in Frequency Analyzer. You can specify multiple frequencies, one per line.</li>
</ul>
<p >Repeating the same frequency will cause Flipper to listen to this frequency more often.</p>
<h4><a class="anchor" id="autotoc_md140"></a>
Adding a Custom Preset</h4>
<p >You can have as many presets as you want. Presets are embedded into <code>.sub</code> files, so another Flipper can load them directly from that file. Each preset is defined by the following fields:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Custom_preset_name</code>   </td><td class="markdownTableBodyNone">string, preset name that will be shown in SubGHz application    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Custom_preset_module</code>   </td><td class="markdownTableBodyNone">string, transceiver identifier. Set to <code>CC1101</code> for Flipper Zero    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Custom_preset_data</code>   </td><td class="markdownTableBodyNone">transceiver configuration data. See <a href="#transceiver-configuration-data">Transceiver Configuration Data</a> for details.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md141"></a>
Example</h3>
<div class="fragment"><div class="line"># to use manual settings and prevent them from being deleted on upgrade, rename *_user.example files to *_user</div>
<div class="line">Filetype: Flipper SubGhz Setting File</div>
<div class="line">Version: 1</div>
<div class="line"> </div>
<div class="line"># Add Standard frequencies for your region</div>
<div class="line">Add_standard_frequencies: true</div>
<div class="line"> </div>
<div class="line"># Default Frequency: used as default for &quot;Read&quot; and &quot;Read Raw&quot;</div>
<div class="line">Default_frequency: 433920000</div>
<div class="line"> </div>
<div class="line"># Frequencies used for &quot;Read&quot;, &quot;Read Raw&quot; and &quot;Frequency Analyzer&quot;</div>
<div class="line">Frequency: 300000000</div>
<div class="line">Frequency: 310000000</div>
<div class="line">Frequency: 320000000</div>
<div class="line"> </div>
<div class="line"># Frequencies used for hopping mode (keep this list small or Flipper will miss the signal)</div>
<div class="line">Hopper_frequency: 300000000</div>
<div class="line">Hopper_frequency: 310000000</div>
<div class="line">Hopper_frequency: 310000000</div>
<div class="line"> </div>
<div class="line"># Custom preset</div>
<div class="line"># format for CC1101 &quot;Custom_preset_data:&quot; XX YY XX YY .. 00 00 ZZ ZZ ZZ ZZ ZZ ZZ ZZ ZZ, where: XX-register, YY - register data, 00 00 - end load register, ZZ - 8 byte Pa table register</div>
<div class="line"> </div>
<div class="line">#Custom_preset_name: AM_1</div>
<div class="line">Custom_preset_module: CC1101</div>
<div class="line">Custom_preset_data: 02 0D 03 07 08 32 0B 06 14 00 13 00 12 30 11 32 10 17 18 18 19 18 1D 91 1C 00 1B 07 20 FB 22 11 21 B6 00 00 00 C0 00 00 00 00 00 00</div>
<div class="line"> </div>
<div class="line">#Custom_preset_name: AM_2</div>
<div class="line">#Custom_preset_module: CC1101</div>
<div class="line">#Custom_preset_data: 02 0D 03 07 08 32 0B 06 14 00 13 00 12 30 11 32 10 17 18 18 19 18 1D 91 1C 00 1B 07 20 FB 22 11 21 B6 00 00 00 C0 00 00 00 00 00 00</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
